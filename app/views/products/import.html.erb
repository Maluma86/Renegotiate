<h1>Import Products via CSV</h1>

<%= form_with url: upload_products_path, method: :post, local: true, html: { multipart: true, data: { turbo: false } } do %>
  <div class="form-group">
    <label for="file">Choose your CSV file:</label><br>
    <%= file_field_tag :file, accept: ".csv", class: "form-control-file", onchange: "updateFilename()" %>
    <p id="selected-filename" style="margin-top: 5px; font-style: italic; color: #555;"></p>
  </div>

  <div class="form-group" style="margin-top: 10px;">
    <%= submit_tag "Upload", class: "import-btn" %>
  </div>
<% end %>

<hr style="margin-top: 30px; margin-bottom: 20px;">

<div>
  <p>Need a template? <%= link_to "Download CSV example", asset_path("/template_upload.csv"), download: "template_upload.csv", class: "btn btn-outline-secondary" %></p>
</div>

<script>
  function updateFilename() {
    const fileInput = document.querySelector('input[type="file"]');
    const fileNameDisplay = document.getElementById('selected-filename');
    if (fileInput.files.length > 0) {
      fileNameDisplay.innerText = `Selected file: ${fileInput.files[0].name}`;
    } else {
      fileNameDisplay.innerText = '';
    }
  }
</script>
