<!-- app/views/products/show.html.erb -->

<div class="product-page-container">

  <!-- Sticky header with title + supplier -->
  <div class="wrapper-that-freezes-things">
    <div class="products-header">
      <h1 class="product-title"><%= @product.name %></h1>
      <div class="product-supplier">
        Supplier:
        <% if (s = @product.supplier) %>
          <%= link_to s.company_name, "#", class: "product-supplier-link" %>
        <% else %>
          <span class="text-gray-500">Unknown</span>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Single centered card -->
  <div class="card-wrapper">
    <div class="card-pro">
      <h2 class="card-pro__title"><%= @product.name %></h2>

      <p class="card-pro__content">
        <strong>Supplier:</strong>
        <% if s %>
          <%= s.company_name %> (<%= mail_to s.contact_email %>)
        <% else %>
          Unknown
        <% end %>
      </p>

      <hr>

      <p class="card-pro__content">
        <strong>Description:</strong><br>
        <%= @product.description.presence || "No description available." %>
      </p>

      <p class="card-pro__content">
        <strong>Current Price:</strong> <%= number_to_currency(@product.current_price) %><br>
        <strong>Ends:</strong> <%= l(@product.contract_end_date) %><br>
        <strong>Status:</strong> <%= @product.status.capitalize %>
      </p>

      <p class="card-pro__content">
        <strong>Last 30 days:</strong> <%= @product.last_month_volume %> units<br>
        <strong>Last 12 months:</strong> <%= @product.last_year_volume %> units
      </p>

      <!-- action buttons -->
      <div class="card-pro__content" style="text-align: center; margin-top: 1.5rem;">
        <%= link_to "← Back to results",
                    products_path,
                    class: "import-btn" %>
        <%= link_to "Renegotiate",
                    new_product_renegotiation_path(@product),
                    class: "import-btn" %>
      </div>
    </div>
  </div>
</div>
