<!-- app/views/products/show.html.erb -->

<div class="product-page-container">

  <!-- Sticky header with title + supplier -->
  <div class="wrapper-that-freezes-things">
    <div class="products-header">
      <h1 class="product-title"><%= @product.name %></h1>
      <div class="product-supplier">
        Supplier:
        <% if (s = @product.supplier) %>
          <%= link_to s.company_name, "#",
                      class: "product-supplier-link" %>
        <% else %>
          <span class="text-gray-500">Unknown</span>
        <% end %>
      </div>
    </div>
  </div>

  <!-- 2Ã—2 grid of cards -->
  <div class="product-show-grid">
    <!-- DESCRIPTION -->
    <div class="product-card">
      <div class="product-card__header">Description</div>
      <div class="product-card__body">
        <%= @product.description.presence || "No description available." %>
      </div>
    </div>

    <!-- CONTRACT DETAILS -->
    <div class="product-card">
      <div class="product-card__header">Contract Details</div>
      <div class="product-card__body">
        <p><strong>Current Price:</strong>
           <%= number_to_currency(@product.current_price) %></p>
        <p><strong>Ends:</strong>
           <%= l(@product.contract_end_date) %></p>
        <p><strong>Status:</strong>
           <%= @product.status.capitalize %></p>
      </div>
    </div>

    <!-- SUPPLIER INFO -->
    <div class="product-card">
      <div class="product-card__header">Supplier Info</div>
      <div class="product-card__body">
        <% if s %>
          <p><strong><%= s.company_name %></strong></p>
          <p><%= mail_to s.contact_email %></p>
        <% else %>
          <p>No supplier on record.</p>
        <% end %>
      </div>
    </div>

    <!-- PURCHASE VOLUMES -->
    <div class="product-card">
      <div class="product-card__header">Purchase Volumes</div>
      <div class="product-card__body">
        <p><strong>Last 30 days:</strong>
           <%= @product.last_month_volume %> units</p>
        <p><strong>Last 12 months:</strong>
           <%= @product.last_year_volume %> units</p>
      </div>
    </div>
  </div>

</div>
