<!-- app/views/products/show.html.erb -->
<div class="product-show">

  <!-- LEFT NAVBAR -->
  <nav class="sidebar">
    <%= link_to products_path, class: "nav-button active" do %>
      <i class="fas fa-list"></i>
    <% end %>
    <%= link_to "#", class: "nav-button" do %>
      <i class="fas fa-chart-line"></i>
    <% end %>
  </nav>

  <!-- MAIN -->
  <div class="content">

    <!-- HEADER -->
    <div class="header">
      <h1><%= @product.name %></h1>
      <p>
        Supplier:
        <%= link_to @supplier.company_name, product_path(@product) %>
        &mdash;
        <%= mail_to @supplier.contact_email %>
      </p>
    </div>

    <!-- GRID OF CARDS -->
    <div class="grid">
      <!-- Description -->
      <div class="card description-card">
        <h3>Description</h3>
        <p><%= @product.description %></p>
      </div>

      <!-- Product Info -->
      <div class="card">
        <h3>Product Info</h3>
        <p><strong>SKU:</strong>
           <%= @product.respond_to?(:sku) ? @product.sku : "SKU-#{@product.id.to_s.rjust(6,'0')}" %>
        </p>
        <p><strong>Category:</strong> <%= @product.category %></p>
      </div>

      <!-- Contract Details -->
      <div class="card">
        <h3>Contract Details</h3>
        <ul>
          <li><strong>Current Price:</strong> <%= number_to_currency(@product.current_price) %></li>
          <li><strong>Target Margin:</strong> <%= number_to_percentage(@product.target_margin || 35, precision: 0) %></li>
          <li><strong>Ends:</strong> <%= l(@product.contract_end_date) %></li>
          <li><strong>Status:</strong> <%= @product.status.capitalize %></li>
        </ul>
      </div>

      <!-- Purchase Volumes -->
      <div class="card">
        <h3>Purchase Volumes</h3>
        <ul>
          <li><strong>Last 30 Days:</strong> <%= @product.last_month_volume %> units</li>
          <li><strong>Last 12 Months:</strong>
            <%= @product.respond_to?(:last_year_volume) ? @product.last_year_volume : 0 %> units
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
